<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="icon" href="/svelte-crop-window/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="content-security-policy" content="">
		<link href="/svelte-crop-window/_app/immutable/assets/_page-f00ca1a3.css" rel="stylesheet">
		<link rel="modulepreload" href="/svelte-crop-window/_app/immutable/start-3aa09133.js">
		<link rel="modulepreload" href="/svelte-crop-window/_app/immutable/chunks/index-4b9273a9.js">
		<link rel="modulepreload" href="/svelte-crop-window/_app/immutable/chunks/singletons-0c25b55c.js">
		<link rel="modulepreload" href="/svelte-crop-window/_app/immutable/chunks/paths-6cd3a76e.js">
		<link rel="modulepreload" href="/svelte-crop-window/_app/immutable/components/layout.svelte-cda57add.js">
		<link rel="modulepreload" href="/svelte-crop-window/_app/immutable/modules/pages/_layout.ts-b8ee4d7c.js">
		<link rel="modulepreload" href="/svelte-crop-window/_app/immutable/chunks/_layout-1daba58d.js">
		<link rel="modulepreload" href="/svelte-crop-window/_app/immutable/components/pages/_page.svelte-1872048e.js"><!-- HTML_TAG_START --><style>pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: GitHub Dark Dimmed
  Description: Dark dimmed theme as seen on github.com
  Author: github.com
  Maintainer: @Hirse
  Updated: 2021-05-15

  Colors taken from GitHub's CSS
*/.hljs{color:#adbac7;background:#22272e}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#6cb6ff}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#96d0ff}.hljs-built_in,.hljs-symbol{color:#f69d50}.hljs-code,.hljs-comment,.hljs-formula{color:#768390}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#8ddb8c}.hljs-subst{color:#adbac7}.hljs-section{color:#316dca;font-weight:700}.hljs-bullet{color:#eac55f}.hljs-emphasis{color:#adbac7;font-style:italic}.hljs-strong{color:#adbac7;font-weight:700}.hljs-addition{color:#b4f1b4;background-color:#1b4721}.hljs-deletion{color:#ffd8d3;background-color:#78191b}</style><!-- HTML_TAG_END -->
    <style>
        html,
        body,
        p,
        ol,
        ul,
        li,
        dl,
        dt,
        dd,
        blockquote,
        figure,
        fieldset,
        legend,
        textarea,
        pre,
        iframe,
        hr,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin: 0;
            padding: 0;
        }

        ul {
            list-style: none;
        }

        button,
        input,
        select {
            margin: 0;
        }

        html {
            box-sizing: border-box;
            font-family: sans-serif;
            background-color: #167676;
            color:#f3f5e8;
        }

        a {
            color:#f3f5e8;
            font-weight: bold;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }

        *,
        *::before,
        *::after {
            box-sizing: inherit;
        }

        img,
        video {
            height: auto;
            max-width: 100%;
        }

        iframe {
            border: 0;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        td,
        th {
            padding: 0;
        }

    </style>
</head>

<body>
    <div>




<div class="container svelte-1pjpgag"><div class="box svelte-1pjpgag"><h1 class="svelte-1pjpgag"><a href="https://github.com/sabine/svelte-crop-window" style="display:flex;align-items:center" class="svelte-1pjpgag"><img src="/svelte-crop-window/logo.svg" alt="svelte media crop" style="height:5rem;margin-right:1rem" class="svelte-1pjpgag">
            svelte-crop-window</a></h1>

        <p class="subtitle svelte-1pjpgag">A crop window with touch and mouse gestures to zoom, pan and rotate an image or video.
        </p>
        <p class="svelte-1pjpgag">Media snaps back to cover the crop area.</p></div>

    <div class="box svelte-1pjpgag">Looking for contributions, code review and feedback! Feel free to open an issue on <a href="https://github.com/sabine/svelte-crop-window" class="svelte-1pjpgag">the GitHub repository</a> or connect with me via the Svelte discord (sabine#8815).
    </div>

    <div class="box svelte-1pjpgag">The code of this page is <a href="https://github.com/sabine/svelte-crop-window/blob/main/src/routes/%2Bpage.svelte" class="svelte-1pjpgag">here</a>.
    </div>

    <div class="box svelte-1pjpgag"><h2 id="with-controls" class="svelte-1pjpgag"><a href="#with-controls" class="svelte-1pjpgag">Example with controls</a></h2>

        <div style="height:20em; background: #164646" class="svelte-1pjpgag">

<div class="outer svelte-5oeq2h" style="--crop-window-height:0px;
--crop-window-width:0px;
--outer-height:0px;
--outer-width:0px;">
</div></div>

        <h3 class="svelte-1pjpgag">Aspect ratio</h3>
        <div class="svelte-1pjpgag"><button class="svelte-1pjpgag">8:1</button>
            <button class="svelte-1pjpgag">16:9</button>
            <button class="svelte-1pjpgag">4:3</button>
            <button class="svelte-1pjpgag">1:1</button>
            <button class="svelte-1pjpgag">3:4</button></div>

        <h3 class="svelte-1pjpgag">Scale / Rotation / Position</h3>

        <div style="display:grid; grid-template-columns: auto 1fr;column-gap:2rem" class="svelte-1pjpgag"><div class="svelte-1pjpgag">scale</div>
            <div class="svelte-1pjpgag"><input type="range" min="0.001" max="6" step="0.01" value="0" class="svelte-1pjpgag">
                
                0</div>
            <div class="svelte-1pjpgag">rotation</div>
            <div class="svelte-1pjpgag"><input type="range" min="-180" max="180" step="1" value="0" class="svelte-1pjpgag">
                0</div>
            <div class="svelte-1pjpgag">x</div>
            <input type="number" step="0.01" class="svelte-1pjpgag" value="0">

            <div class="svelte-1pjpgag">y</div>
            <input type="number" step="0.01" class="svelte-1pjpgag" value="0"></div>

        <h3 class="svelte-1pjpgag">Colors</h3>
        <div style="display:grid; grid-template-columns: auto 1fr; column-gap:2rem; align-items:center;" class="svelte-1pjpgag"><div class="svelte-1pjpgag">overlay color</div>
            <input type="color" class="svelte-1pjpgag" value="#167676">
            <div class="svelte-1pjpgag">line color</div>
            <input type="color" class="svelte-1pjpgag" value="#f3f5e8">
            <div class="svelte-1pjpgag">background color</div>
            <input type="color" class="svelte-1pjpgag" value="#164646"></div></div>
    <div class="box svelte-1pjpgag"><h2 id="minimal-code-example" class="svelte-1pjpgag"><a href="#minimal-code-example" class="svelte-1pjpgag">Minimal code example</a></h2>
        <div style="height:20em; background: #222" class="svelte-1pjpgag">

<div class="outer svelte-5oeq2h" style="--crop-window-height:0px;
--crop-window-width:0px;
--outer-height:0px;
--outer-width:0px;">
</div></div>
        <div class="svelte-1pjpgag">
  
  <pre data-language="svelte" class=" svelte-4cqgwq"><code class="hljs"><!-- HTML_TAG_START --><span class="hljs-comment">// in script tag</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CropWindow</span>, defaultOptions, defaultValue } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;svelte-crop-window&#x27;</span>;

<span class="hljs-keyword">let</span> <span class="hljs-attr">media</span>: <span class="hljs-title class_">Media</span> = {
    <span class="hljs-attr">content_type</span>: <span class="hljs-string">&#x27;video&#x27;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/Mountain - 8837.mp4&#x27;</span>
};

<span class="hljs-keyword">let</span> value = defaultValue;

<span class="hljs-comment">// in the template</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height:20em; background: #222&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CropWindow</span> <span class="hljs-attr">bind:value</span> {<span class="hljs-attr">media</span>} <span class="hljs-attr">options</span>=<span class="hljs-string">{defaultOptions}</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<!-- HTML_TAG_END --></code></pre>
</div></div>

    <div class="box svelte-1pjpgag"><h2 id="options" class="svelte-1pjpgag"><a href="#options" class="svelte-1pjpgag">Options</a></h2>

        <div style="max-width:100%; overflow-x:scroll" class="svelte-1pjpgag"><div style="min-width:34em; display:grid; grid-template-columns: 8em 8em 1fr; grid-gap:1rem" class="svelte-1pjpgag"><div class="svelte-1pjpgag">name</div>
                <div class="svelte-1pjpgag">value</div>
                <div class="svelte-1pjpgag">purpose</div>
                <div class="svelte-1pjpgag"><code class="svelte-1pjpgag">shape</code></div>
                <div class="svelte-1pjpgag"><code class="svelte-1pjpgag">&quot;rect&quot; | &quot;round&quot;</code></div>
                <div class="svelte-1pjpgag">Determines how the to-be-cropped media &quot;snaps back&quot; to cover the crop area
                </div>
                <div class="svelte-1pjpgag"><code class="svelte-1pjpgag">crop_window_margin</code></div>
                <div class="svelte-1pjpgag">number of pixels</div>
                <div class="svelte-1pjpgag">Margin of the crop window, in pixels. The crop window will always scale to the
                    maximum possible size in its containing element.
                </div>
                <div class="svelte-1pjpgag"><code class="svelte-1pjpgag">overlay</code></div>
                <div class="svelte-1pjpgag">a Svelte component</div>
                <div class="svelte-1pjpgag">The overlay component which visually highlights the crop area and, possibly,
                    some lines. You can pass your own Svelte component here, for a custom overlay.
                    Look at the included <code class="svelte-1pjpgag">Overlay.svelte</code> to see how it works.
                </div>
                <div class="svelte-1pjpgag"><code class="svelte-1pjpgag">overlay_options</code></div>
                <div class="svelte-1pjpgag">options for the overlay component</div>
                <div class="svelte-1pjpgag">Needs to be whatever options your overlay component takes. The included <code class="svelte-1pjpgag">Overlay.svelte</code> allows you to set the color of the overlay and the color of the lines.
                </div></div></div>

        <h3 id="default-options" class="svelte-1pjpgag"><a href="#default-options" class="svelte-1pjpgag">Default options</a></h3>
        
  
  <pre data-language="svelte" class=" svelte-4cqgwq"><code class="hljs"><!-- HTML_TAG_START -->export const defaultOptions: Options&lt;OverlayOptions&gt; = {
    shape: <span class="hljs-string">&#x27;rect&#x27;</span>,
    crop_window_margin: <span class="hljs-number">10</span>,

    overlay: Overlay,
    overlay_options: {
        line_color: <span class="hljs-string">&#x27;#FFFFFF&#x27;</span>,
        overlay_color: <span class="hljs-string">&#x27;#222222&#x27;</span>
    },
};
<!-- HTML_TAG_END --></code></pre>
</div>

    <div class="box svelte-1pjpgag"><h2 id="how-to-crop" class="svelte-1pjpgag"><a href="#how-to-crop" class="svelte-1pjpgag">How to Crop</a></h2>

        <div style="position:relative;height:300px;width:300px; overflow:hidden" class="svelte-1pjpgag"><video style="transform: translateX(-50%) translateY(-50%) rotate(0deg);height: 0px;margin-left: 150px;margin-top: 150px;
                    max-width:none" src="/svelte-crop-window/Mountain - 8837.mp4" autoplay loop muted class="svelte-1pjpgag"></video></div>

        <h3 class="svelte-1pjpgag">Display in HTML without actually cropping:</h3>

        
  
  <pre data-language="svelte" class=" svelte-4cqgwq"><code class="hljs"><!-- HTML_TAG_START --><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;position:relative;height:{HEIGHT}px;width:{value.aspect * HEIGHT}px; overflow:hidden&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">video</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">transform:</span> <span class="hljs-attr">translateX</span>(<span class="hljs-attr">-50</span>%) <span class="hljs-attr">translateY</span>(<span class="hljs-attr">-50</span>%) <span class="hljs-attr">rotate</span>({<span class="hljs-attr">value.rotation</span> || <span class="hljs-attr">0</span>}<span class="hljs-attr">deg</span>);
    <span class="hljs-attr">height:</span> {(<span class="hljs-attr">value.scale</span> || <span class="hljs-attr">0.0</span>) * <span class="hljs-attr">HEIGHT</span>}<span class="hljs-attr">px</span>;
    <span class="hljs-attr">margin-left:</span> {<span class="hljs-attr">HEIGHT</span> / <span class="hljs-attr">2</span> + (<span class="hljs-attr">value.position.x</span> || <span class="hljs-attr">0</span>) * <span class="hljs-attr">HEIGHT</span>}<span class="hljs-attr">px</span>;
    <span class="hljs-attr">margin-top:</span> {<span class="hljs-attr">HEIGHT</span> / <span class="hljs-attr">value.aspect</span> / <span class="hljs-attr">2</span> + (<span class="hljs-attr">value.position.y</span> || <span class="hljs-attr">0</span>) * <span class="hljs-attr">HEIGHT</span>}<span class="hljs-attr">px</span>;
    <span class="hljs-attr">max-width:none</span>`}
        <span class="hljs-attr">src</span>=<span class="hljs-string">{url}</span>
    /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><!-- HTML_TAG_END --></code></pre>


        <h3 id="pseudo-code" class="svelte-1pjpgag"><a href="#pseudo-code" class="svelte-1pjpgag">Pseudo code to crop</a></h3>

        <ol class="svelte-1pjpgag"><li class="svelte-1pjpgag">Choose a <code class="svelte-1pjpgag">target_height</code> and calculate the width for the cropped image:
                
  
  <pre data-language="svelte" class=" svelte-4cqgwq"><code class="hljs"><!-- HTML_TAG_START -->target_width = target_height * value.aspect;<!-- HTML_TAG_END --></code></pre>
</li>
            <li class="svelte-1pjpgag">Calculate factor by which to scale:
                
  
  <pre data-language="svelte" class=" svelte-4cqgwq"><code class="hljs"><!-- HTML_TAG_START -->s = value.scale * target_height / media.height;<!-- HTML_TAG_END --></code></pre>
</li>
            <li class="svelte-1pjpgag">Scale media by <code class="svelte-1pjpgag">s</code>:
                code=resized_media = scale(media, s); /&gt;
            </li>
            <li class="svelte-1pjpgag">Rotate media by <code class="svelte-1pjpgag">value.rotation</code>:
                
  
  <pre data-language="svelte" class=" svelte-4cqgwq"><code class="hljs"><!-- HTML_TAG_START -->resized_and_rotated_media =
    rotate(resized_media, value.rotation);<!-- HTML_TAG_END --></code></pre>
</li>
            <li class="svelte-1pjpgag">Calculate x,y position of area to extract: 
  
  <pre data-language="svelte" class=" svelte-4cqgwq"><code class="hljs"><!-- HTML_TAG_START -->left =
    (resized_and_rotated_media.width - target_width) / 2.0
    - value.x * target_height;
top =
    (resized_and_rotated_media.height - target_height) / 2.0
    - value.y * target_height;<!-- HTML_TAG_END --></code></pre>
</li>
            <li class="svelte-1pjpgag">Extract area:
                
  
  <pre data-language="svelte" class=" svelte-4cqgwq"><code class="hljs"><!-- HTML_TAG_START -->cropped_media =
    extract_area(resized_and_rotated_media, left, top,
                 target_width, target_height);<!-- HTML_TAG_END --></code></pre>
</li></ol></div>

    <div class="box svelte-1pjpgag"><h2 id="what-it-doesnt-do" class="svelte-1pjpgag"><a href="#what-it-doesnt-do" class="svelte-1pjpgag">What this component doesn&#39;t do</a></h2>
        <ol class="svelte-1pjpgag"><li class="svelte-1pjpgag">Does not modify/crop the image, you have to do that by whatever means make sense
                for your application.
            </li>
            <li class="svelte-1pjpgag">Doesn&#39;t (yet) provide usable controls. Currently, you need to implement your own. Contributions are
                welcome.
            </li></ol></div>

    <div class="box svelte-1pjpgag"><small class="svelte-1pjpgag"><p class="svelte-1pjpgag">Video from shantararam at pixabay: <a href="https://pixabay.com/videos/mountain-nature-snow-old-mountain-8837/" class="svelte-1pjpgag">https://pixabay.com/videos/mountain-nature-snow-old-mountain-8837/</a></p></small></div>
</div>


		<script type="module" data-sveltekit-hydrate="11yk71i">
			import { start } from "/svelte-crop-window/_app/immutable/start-3aa09133.js";

			start({
				env: {},
				hydrate: {
					status: 200,
					error: null,
					node_ids: [0, 2],
					params: {},
					routeId: "",
					data: (function(a){return [a,a]}(null)),
					form: null
				},
				paths: {"base":"/svelte-crop-window","assets":"/svelte-crop-window"},
				target: document.querySelector('[data-sveltekit-hydrate="11yk71i"]').parentNode,
				trailing_slash: "never"
			});
		</script>
	</div>
</body>

</html>
